{
    "id": "org.gimp.GIMP.Plugin.GMic",
    "branch": "3",
    "runtime": "org.gimp.GIMP",
    "runtime-version": "stable",
    "sdk": "org.gnome.Sdk//49",
    "build-extension": true,
    "build-options": {
        "prefix": "/app/extensions/GMic",
        "prepend-path": "/app/extensions/GMic/bin",
        "prepend-pkg-config-path": "/app/extensions/GMic/lib/pkgconfig",
        "prepend-ld-library-path": "/app/extensions/GMic/lib"
    },
    "modules": [
        "qt5.json",
        {
            "name": "gmic",
            "buildsystem": "cmake-ninja",
            "no-make-install": true,
            "subdir": "gmic-qt",
            "config-opts": [
                "-DGMIC_QT_HOST=gimp3",
                "-DENABLE_SYSTEM_GMIC=OFF",
                "-DCMAKE_BUILD_TYPE=Release"
            ],
            "post-install": [
                "install -Dm755 gmic_gimp_qt -t ${FLATPAK_DEST}/plug-ins/gmic_gimp_qt",
                "install -Dm644 ../org.gimp.GIMP.Plugin.GMic.metainfo.xml -t ${FLATPAK_DEST}/share/metainfo/",
                "install -Dm644 -t $FLATPAK_DEST/share/licenses/gmic COPYING"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gmic.eu/get_file.php?file=source%2Fgmic_3.7.0.tar.gz",
                    "archive-type": "tar-gzip",
                    "sha256": "ccb17e22a726b5dbafd1811a519a1a1cf823fb671de600e0d1b1b27bcd4b694d",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 10217,
                        "is-main-source": true,
                        "url-template": "https://gmic.eu/get_file.php?file=source/gmic_$version.tar.gz"
                    }
                },
                {
                    "type": "file",
                    "path": "org.gimp.GIMP.Plugin.GMic.metainfo.xml"
                }
            ]
        }
    ]
}
